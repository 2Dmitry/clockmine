**Установка и настройка**
1.
- git clone <repo>
- переименовываем файл "deploy/example.env" в ".env" и несём его в корень проекта
2.
- регистрируемся в redmine
- заходим в настройки аккаунта redmine, находим и копируем API-key, данное значение присваиваем переменной REDMINE_API_KEY в ".env" файле
3.
- регистрируемся в clockify
- заходим в настройки аккаунта clockify, находим и копируем API-key, данное значение присваиваем переменной CLOCKIFY_API_KEY в ".env" файле
4.
- если ваша таймзона не "Europe/Moscow", то в ".env" файле меняем значение переменной TIMEZONE на таймзону из списка разрешенных таймзон, перечисленных в файле "timezones.py"
- (по желению) можете в .env файле указать любую ссылку, которая будет выводится в консоль сразу после того как вы успешно выполните команду push
ну типа чтоб затрекал и сразу проверить, что всё корректно
5.
- собираемся командой: "docker compose build" (если настроены алиасы, то командой "dc build")
- запускаемся командой: "docker compose up -d" (если настроены алиасы, то командой "dc up -d")
6.
- при первом запуске выполняем команду: "docker-compose exec app ./manage.py init" (если настроены алиасы, то командой "dc exec app ./manage.py init"),
которая копирует "Деятельность" из редмайна в Клокифай, кроме той деятельности, которая перечислена в списке REDMINE_ACTIVITIES_NOT_ALLOWED в ".env" файле
- (по желению) перейдите в Настройки (https://app.clockify.me/workspaces/) во вкладку "Разрешения" и уберите галочку у поля "Активировать оплачиваемые часы"
7.
7.1 (рекомендую) переходим на страницу "Скачать приложения" (https://clockify.me/apps) и выбираем нужный вариант (я рекомендую использовать расширение для браузера), устанавливаем
7.2 (если выполнили пункт 7.1) авторизуемся в расширении clockify для браузера и выводим его [расширение] на панель быстрого доступа для удобства
7.3 (если выполнили пункт 7.1) (рекомендую) заходим в найстроки расширения clockify для браузера и оставляем включенными только одну опцию: "Показывать всплывающее окно".
Что значит опция "Включить контекстное меню" я так и не понял
p.s. Подробнее наверное можно было бы прочитать тут: https://clockify.me/help/ вот только дока говно даже если использовать англ.язык
7.4 (если выполнили пункт 7/1) заходим в настройки расширения clockify для браузера и находим там "Интеграции", (по желанию отключаем все интеграции),
затем в поле Кастомных доменов добавляем ссылку "https://redmine.sbps.ru" (ВНИМАНИЕ! Проверьте, что на конце урла нет слеша) и в выпадающем списке выбираем "Redmine" и нажимаем "ADD"
данное действие позволит расширению рисовать кнопку "Запустить таймер" в каждой задаче Редмайна

**Варианты команд**
docker-compose exec app ./manage.py init
docker-compose exec app ./manage.py report
docker-compose exec app ./manage.py report --coeff 1.073
docker-compose exec app ./manage.py report --target 5.50
docker-compose exec app ./manage.py push
docker-compose exec app ./manage.py push --coeff 1.073
docker-compose exec app ./manage.py push --target 5.50
*написанное вами число пройдет валидацию только если будет больше нуля, что эти числа делают можно догадаться из названия

**Нюансы**
1. Если вы готовы перенести ваше время из Clockify в Redmine, то можете сразу выполнять команду:
docker-compose exec app ./manage.py push
- Ты трекаешь время, и я трекаю время, но есть нюанс.
2. Для успешного выполнения команды из п.1 нужно, чтобы каждая запись была успешно распаршена данным приложением (смотрите столбец "Можно затрекать"),
если хотя бы одна записать будет иметь значение "False", то приложение не перенесет время в Redmine.
3. Для того, чтобы успешно распарсить запись о времени работы, нужно чтобы в поле Описание был номер задачи, к которой у вас есть доступ в Редмайн,
иначе получите уведомление, что невозможно затрекать время.
p.s. За этим можно не следить, если вы используете кнопку "Запустить таймер" или вводите только лишь номер задачи руками
4. Если вы не выбрали никакой тег (активность), то этому времени будет автоматически присвоена активность "Разработка"
5. Время будет затрекано в тот день, в который был сделан старт
то есть если вы работали в пятницу и забыли затрекать, то запустите команду "push" в понедельник и время будет затрекано "задним числом"
если вы начали трекать время в 23:30 вторника, а закончили в 1:00 среды, то время будет затрекано во вторник
6. Информация о затреканном времени удаляется из Clockify сразу после того, как была успешно перенесена в Redmine

**Типовое применение**
1.1. Открыли задачу в Redmine, нажали кнопку "старт таймер"
1.2. Открыли расширение для браузера, ввели номер задачу вручную, запустили таймер
2. Выбрали тег (не обязательно)
3. *работаем* (не обязательно)
4.1. Останавливаем таймер вручную (p.s. таймер остановится автоматически, но только в момент выполнения вами команды report/push)
4.2. Запускаем таймер в другой задаче (можно даже без остановки текущего таймера, т.к. текущий таймер остановится автоматически)
4.3. Запускаем либо команду report, либо команду push


*Команды для разработки:*
python -m venv venv
pip install --upgrade pip
*activate venv*
pip install -r requirements.txt
